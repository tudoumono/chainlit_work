# OpenAI APIチャットアプリケーション

Chainlitを使用したOpenAI APIチャットインターフェースです。このアプリケーションでは、OpenAIの利用可能なさまざまなモデルを使用してチャットができ、テキストファイルをアップロードして分析することも可能です。

## 機能

- OpenAIの様々なモデルの利用
- モデルの動的切り替え
- テキストファイル（.txt, .log）のアップロード対応
- チャット履歴の自動保存
- ストリーミング形式のレスポンス表示
- 進行状況の表示
- Markdown形式の応答表示対応

## 必要条件

- Python 3.8以上
- OpenAI API キー

## インストール

1. リポジトリをクローンまたはダウンロードします。

```bash
git clone [リポジトリURL]
cd [リポジトリ名]
```

2. 依存パッケージをインストールします。

```bash
pip install -r requirements.txt
```

3. `.env`ファイルを設定します。

```
OPENAI_API_KEY=your_openai_api_key_here
```

## 使用方法

以下のコマンドでアプリケーションを起動します：

```bash
chainlit run main.py
```

ブラウザで`http://localhost:8000`を開いてアプリケーションにアクセスします。

## ファイル構成

- `main.py` - メインエントリーポイント
- `config.py` - 設定関連
- `models.py` - OpenAIモデル関連
- `chat_handler.py` - チャット処理
- `file_handler.py` - ファイル処理
- `utils.py` - ユーティリティ関数
- `.chainlit/config.toml` - Chainlit設定ファイル
- `.env` - 環境変数設定

## モデルの切り替え

アプリケーションのインターフェースから利用可能なOpenAIモデルを選択できます。以下のモデルをサポートしています：

- GPT‑3.5 Turbo(軽量・高速・低価格)
- GPT‑4o mini(GPT-4oの軽量版)
- GPT‑4.1 nano(最速・最安・100万トークン文脈)
- GPT‑4 Turbo(GPT‑4ベースの高速モデル)
- GPT‑4o(マルチモーダル対応)
- GPT‑4.1 mini(100万トークン文脈、コード特化)
- GPT‑4.1(最新・100万トークン文脈、コード特化)

## ファイルアップロード

以下の制限でファイルをアップロードできます：

- 対応形式: .txt, .log
- 最大ファイル数: 10ファイル
- 最大ファイルサイズ: 100MB

## チャット履歴

チャット履歴は自動的に保存され、`chat_history`ディレクトリに格納されます。

## 拡張

将来的にさまざまなファイル形式に対応する予定です。`config.py`の`MIME_TYPES`を編集することで、サポートするファイル形式を追加できます。

## トラブルシューティング

- APIキーが設定されていない場合は、`.env`ファイルを確認してください。
- ファイルアップロードに問題がある場合は、ファイル形式とサイズを確認してください。
- モデルへの接続に問題がある場合は、インターネット接続とAPIキーの有効性を確認してください。